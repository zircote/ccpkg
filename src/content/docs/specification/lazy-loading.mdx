---
title: "Lazy Loading"
description: "Aspirational lazy loading behavior for on-demand component activation."
---

# Lazy Loading (Aspirational)

Lazy loading is a **future host integration target** (Appendix D.4), not a current normative requirement. It is documented here to guide host development and package authoring best practices. See [Appendix D](/specification/appendices/) for other aspirational features (D.1 Hot-Reload After Install, D.2 Host-Aware Lockfile Loading, D.3 Runtime Component State Machine).

ccpkg implementations MUST NOT depend on lazy loading and MUST NOT claim to provide it. Packages should be structured to benefit from whatever lazy loading the host provides natively.

## Ideal Behavior

Only package metadata is loaded at session startup. Full component content (SKILL.md bodies, AGENT.md bodies, command files) is deferred until the component is actually invoked. This minimizes startup time and context token consumption.

## On-Demand Loading

| Component | Trigger | What Is Loaded |
|---|---|---|
| Skill | LLM activates based on name/description | Full SKILL.md body |
| Agent | User or LLM activates the agent | Full AGENT.md body |
| Command | User invokes the slash command | Full command file content |
| Hook | Host event fires matching the event type | Hook script executed |
| MCP server | First tool invocation targeting the server | Server process started |
| LSP server | First file matching the language scope | Server process started |

## Current Behavior

Claude Code loads skill frontmatter at startup and defers SKILL.md body loading until Skill tool invocation. This partial lazy loading is host-native behavior, not something ccpkg controls. Other component types do not have equivalent deferred loading.

## What This Requires

A host-level mechanism to index component metadata (name, description, type) separately from component content, and to load full content on demand at invocation time. No host currently provides this as a general-purpose API.
